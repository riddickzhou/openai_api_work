{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block content %}
<h1 align="center">Notes</h1>
<ul class="list-group list-group-flush" id="notes">
  {% for note in user.notes %}
  <li class="list-group-item">
    {{ note.data }}
    <button type="button" class="close" onClick="deleteNote({{ note.id }})">
      <span aria-hidden="true">&times;</span>
    </button>
    <br />
    <label for="processed_text">Processed Text:</label>
    <textarea name="processed_text_{{ note.id }}" id="processed_text_{{ note.id }}" class="form-control" placeholder="Processed text for this note" readonly>{{ note.processed_data }}</textarea>
    <br />
  </li>
  {% endfor %}
</ul>

<!-- Display flash messages -->
{% with messages = get_flashed_messages() %}
   {% if messages %}
       <ul class="messages">
           {% for message in messages %}
               <li>{{ message }}</li>
           {% endfor %}
       </ul>
   {% endif %}
{% endwith %}

<!-- JSON file upload form -->
<form method="POST" enctype="multipart/form-data" action="/upload_json">
  <h2>Upload JSON File</h2>
  <input type="file" name="json_file">
  <br />

  <textarea name="note" id="note" class="form-control"></textarea>
  <br />
  <div align="center">
    <button type="submit" class="btn btn-primary">Add Note</button>
  </div>
</form>

<!-- Display JsonItem data -->
<h2>Uploaded JSON Items:</h2>
<ul>
  {% for json_item in json_items %}
    <li>
      <strong>Prompt:</strong> {{ json_item.prompt }}<br>
      <strong>Response:</strong> {{ json_item.response }}
    </li>
  {% endfor %}
</ul>

{% endblock %}
